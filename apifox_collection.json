{
  "info": {
    "name": "AIé¢è¯•ç³»ç»ŸAPI",
    "description": "AIé¢è¯•ç³»ç»Ÿåç«¯APIæ¥å£é›†åˆï¼Œæ”¯æŒå®æ—¶è§†é¢‘æµå¤„ç†å’ŒAIåˆ†æ",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8000",
      "type": "string",
      "description": "APIæœåŠ¡å™¨åœ°å€"
    },
    {
      "key": "sessionId",
      "value": "test-session-123",
      "type": "string",
      "description": "é¢è¯•ä¼šè¯ID"
    }
  ],
  "item": [
    {
      "name": "ğŸ¯ é¢è¯•ç®¡ç†",
      "description": "é¢è¯•ä¼šè¯çš„åˆ›å»ºã€ç®¡ç†å’Œç»“æœæŸ¥è¯¢ç›¸å…³æ¥å£",
      "item": [
        {
          "name": "åˆ›å»ºé¢è¯•ä¼šè¯",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"user_id\": \"user123\",\n  \"metadata\": {\n    \"position\": \"å‰ç«¯å·¥ç¨‹å¸ˆ\",\n    \"level\": \"ä¸­çº§\",\n    \"department\": \"æŠ€æœ¯éƒ¨\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/interview/start",
              "host": ["{{baseUrl}}"],
              "path": ["api", "interview", "start"]
            },
            "description": "åˆ›å»ºæ–°çš„é¢è¯•ä¼šè¯ï¼Œè¿”å›ä¼šè¯IDç”¨äºåç»­æ“ä½œ"
          }
        },
        {
          "name": "è·å–é¢è¯•ä¼šè¯ä¿¡æ¯",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/interview/session/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "interview", "session", "{{sessionId}}"]
            },
            "description": "æ ¹æ®ä¼šè¯IDè·å–é¢è¯•ä¼šè¯çš„è¯¦ç»†ä¿¡æ¯"
          }
        },
        {
          "name": "æ›´æ–°ä¼šè¯çŠ¶æ€",
          "request": {
            "method": "PUT",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/interview/session/{{sessionId}}/status?status=in_progress",
              "host": ["{{baseUrl}}"],
              "path": [
                "api",
                "interview",
                "session",
                "{{sessionId}}",
                "status"
              ],
              "query": [
                {
                  "key": "status",
                  "value": "in_progress",
                  "description": "é¢è¯•çŠ¶æ€: waiting|in_progress|completed|failed"
                }
              ]
            },
            "description": "æ›´æ–°é¢è¯•ä¼šè¯çš„çŠ¶æ€"
          }
        },
        {
          "name": "è·å–é¢è¯•ä¼šè¯åˆ—è¡¨",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/interview/sessions?skip=0&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "interview", "sessions"],
              "query": [
                {
                  "key": "skip",
                  "value": "0",
                  "description": "è·³è¿‡çš„è®°å½•æ•°"
                },
                {
                  "key": "limit",
                  "value": "10",
                  "description": "è¿”å›çš„æœ€å¤§è®°å½•æ•°"
                }
              ]
            },
            "description": "è·å–é¢è¯•ä¼šè¯åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µ"
          }
        },
        {
          "name": "è·å–é¢è¯•ç»“æœ",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/interview/results/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "interview", "results", "{{sessionId}}"]
            },
            "description": "è·å–æŒ‡å®šä¼šè¯çš„é¢è¯•ç»“æœå’Œåˆ†ææŠ¥å‘Š"
          }
        },
        {
          "name": "æ›´æ–°é¢è¯•ç»“æœ",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"transcript\": [\"ä½ å¥½ï¼Œè¯·è‡ªæˆ‘ä»‹ç»ä¸€ä¸‹\", \"æˆ‘æ˜¯ä¸€åå‰ç«¯å·¥ç¨‹å¸ˆ...\"],\n  \"overall_score\": 85.5,\n  \"feedback\": \"è¡¨ç°è‰¯å¥½ï¼Œæ²Ÿé€šæ¸…æ™°\",\n  \"duration\": 30.5\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/interview/results/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "interview", "results", "{{sessionId}}"]
            },
            "description": "æ›´æ–°é¢è¯•ç»“æœæ•°æ®"
          }
        },
        {
          "name": "åˆ é™¤é¢è¯•ä¼šè¯",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/interview/session/{{sessionId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "interview", "session", "{{sessionId}}"]
            },
            "description": "åˆ é™¤æŒ‡å®šçš„é¢è¯•ä¼šè¯åŠç›¸å…³æ•°æ®"
          }
        },
        {
          "name": "è·å–é¢è¯•ç»Ÿè®¡ä¿¡æ¯",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/interview/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["api", "interview", "statistics"]
            },
            "description": "è·å–é¢è¯•ç³»ç»Ÿçš„ç»Ÿè®¡ä¿¡æ¯"
          }
        }
      ]
    },
    {
      "name": "ğŸ¤– AIå¤„ç†",
      "description": "è¯­éŸ³è¯†åˆ«ã€è§†é¢‘åˆ†æç­‰AIåŠŸèƒ½ç›¸å…³æ¥å£",
      "item": [
        {
          "name": "è¯­éŸ³è¯†åˆ«ï¼ˆWhisperï¼‰",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "session_id",
                  "value": "{{sessionId}}",
                  "type": "text",
                  "description": "é¢è¯•ä¼šè¯ID"
                },
                {
                  "key": "language",
                  "value": "zh",
                  "type": "text",
                  "description": "è¯­è¨€ä»£ç ï¼ˆzh|enï¼‰"
                },
                {
                  "key": "audio_file",
                  "type": "file",
                  "description": "éŸ³é¢‘æ–‡ä»¶ï¼ˆæ”¯æŒwavã€mp3ç­‰æ ¼å¼ï¼‰"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/transcribe",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "transcribe"]
            },
            "description": "ä½¿ç”¨Whisperæ¨¡å‹è¿›è¡Œè¯­éŸ³è¯†åˆ«ï¼Œå°†éŸ³é¢‘è½¬æ¢ä¸ºæ–‡å­—"
          }
        },
        {
          "name": "è§†é¢‘åˆ†æ",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "session_id",
                  "value": "{{sessionId}}",
                  "type": "text",
                  "description": "é¢è¯•ä¼šè¯ID"
                },
                {
                  "key": "video_file",
                  "type": "file",
                  "description": "è§†é¢‘æ–‡ä»¶ï¼ˆæ”¯æŒmp4ã€webmç­‰æ ¼å¼ï¼‰"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/analyze-video",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "analyze-video"]
            },
            "description": "åˆ†æè§†é¢‘ä¸­çš„è¡¨æƒ…ã€æ‰‹åŠ¿ã€çœ¼ç¥æ¥è§¦ç­‰éè¯­è¨€è¡¨ç°"
          }
        },
        {
          "name": "æƒ…æ„Ÿæ£€æµ‹",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "session_id",
                  "value": "{{sessionId}}",
                  "type": "text",
                  "description": "é¢è¯•ä¼šè¯ID"
                },
                {
                  "key": "image_file",
                  "type": "file",
                  "description": "å›¾åƒæ–‡ä»¶ï¼ˆæ”¯æŒjpgã€pngç­‰æ ¼å¼ï¼‰"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/detect-emotions",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "detect-emotions"]
            },
            "description": "æ£€æµ‹å›¾åƒä¸­äººç‰©çš„æƒ…æ„ŸçŠ¶æ€"
          }
        },
        {
          "name": "è¯­éŸ³è´¨é‡åˆ†æ",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "session_id",
                  "value": "{{sessionId}}",
                  "type": "text",
                  "description": "é¢è¯•ä¼šè¯ID"
                },
                {
                  "key": "audio_file",
                  "type": "file",
                  "description": "éŸ³é¢‘æ–‡ä»¶"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/analyze-speech-quality",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "analyze-speech-quality"]
            },
            "description": "åˆ†æè¯­éŸ³çš„è´¨é‡ï¼ŒåŒ…æ‹¬è¯­é€Ÿã€éŸ³é‡ã€æ¸…æ™°åº¦ç­‰"
          }
        },
        {
          "name": "éŸ³é¢‘å¤„ç†ï¼ˆé€šç”¨æ¥å£ï¼‰",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"session_id\": \"{{sessionId}}\",\n  \"audio_data\": \"base64ç¼–ç çš„éŸ³é¢‘æ•°æ®\",\n  \"processing_type\": \"audio_to_text\",\n  \"language\": \"zh\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/process-audio",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "process-audio"]
            },
            "description": "é€šç”¨éŸ³é¢‘å¤„ç†æ¥å£ï¼Œæ”¯æŒå¤šç§å¤„ç†ç±»å‹"
          }
        },
        {
          "name": "æ‰¹é‡éŸ³é¢‘å¤„ç†",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "session_id",
                  "value": "{{sessionId}}",
                  "type": "text"
                },
                {
                  "key": "processing_types",
                  "value": "transcribe,speech_quality",
                  "type": "text",
                  "description": "å¤„ç†ç±»å‹ï¼ˆé€—å·åˆ†éš”ï¼‰"
                },
                {
                  "key": "audio_file",
                  "type": "file"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/batch-process",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "batch-process"]
            },
            "description": "æ‰¹é‡å¤„ç†éŸ³é¢‘ï¼ŒåŒæ—¶æ‰§è¡Œå¤šç§åˆ†æ"
          }
        },
        {
          "name": "è·å–AIæ¨¡å‹çŠ¶æ€",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/ai/models/status",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "models", "status"]
            },
            "description": "è·å–AIæ¨¡å‹çš„åŠ è½½çŠ¶æ€å’Œå¯ç”¨æ€§"
          }
        },
        {
          "name": "åŠ è½½Whisperæ¨¡å‹",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/ai/models/load-whisper?model_name=base",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "models", "load-whisper"],
              "query": [
                {
                  "key": "model_name",
                  "value": "base",
                  "description": "æ¨¡å‹åç§°ï¼štiny|base|small|medium|large"
                }
              ]
            },
            "description": "åŠ è½½æŒ‡å®šç‰ˆæœ¬çš„Whisperæ¨¡å‹"
          }
        },
        {
          "name": "åŠ è½½è§†é¢‘åˆ†ææ¨¡å‹",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/ai/models/load-video-analysis",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "models", "load-video-analysis"]
            },
            "description": "åŠ è½½è§†é¢‘åˆ†æç›¸å…³æ¨¡å‹"
          }
        },
        {
          "name": "AIæœåŠ¡å¥åº·æ£€æŸ¥",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/ai/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "health"]
            },
            "description": "æ£€æŸ¥AIæœåŠ¡çš„å¥åº·çŠ¶æ€"
          }
        }
      ]
    },
    {
      "name": "âš™ï¸ ç³»ç»Ÿæ¥å£",
      "description": "ç³»ç»ŸåŸºç¡€åŠŸèƒ½æ¥å£",
      "item": [
        {
          "name": "æ ¹è·¯å¾„",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/",
              "host": ["{{baseUrl}}"],
              "path": [""]
            },
            "description": "APIæ ¹è·¯å¾„ï¼Œè¿”å›ç³»ç»ŸåŸºæœ¬ä¿¡æ¯"
          }
        },
        {
          "name": "å¥åº·æ£€æŸ¥",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            },
            "description": "ç³»ç»Ÿå¥åº·æ£€æŸ¥æ¥å£"
          }
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// è‡ªåŠ¨ç”Ÿæˆä¼šè¯IDï¼ˆå¦‚æœæ²¡æœ‰è®¾ç½®ï¼‰",
          "if (!pm.collectionVariables.get('sessionId') || pm.collectionVariables.get('sessionId') === 'test-session-123') {",
          "    const timestamp = Date.now();",
          "    const randomId = Math.random().toString(36).substr(2, 9);",
          "    const sessionId = `session-${timestamp}-${randomId}`;",
          "    pm.collectionVariables.set('sessionId', sessionId);",
          "    console.log('ç”Ÿæˆæ–°çš„ä¼šè¯ID:', sessionId);",
          "}"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// é€šç”¨å“åº”æ£€æŸ¥",
          "pm.test('å“åº”çŠ¶æ€ç ä¸º 200', function () {",
          "    pm.response.to.have.status(200);",
          "});",
          "",
          "pm.test('å“åº”æ ¼å¼ä¸º JSON', function () {",
          "    pm.response.to.be.json;",
          "});",
          "",
          "// æ£€æŸ¥å“åº”ç»“æ„",
          "pm.test('å“åº”åŒ…å«æˆåŠŸæ ‡è¯†', function () {",
          "    const jsonData = pm.response.json();",
          "    pm.expect(jsonData).to.have.property('success');",
          "});",
          "",
          "// å¦‚æœæ˜¯åˆ›å»ºä¼šè¯çš„æ¥å£ï¼Œä¿å­˜session_id",
          "if (pm.request.url.path.includes('interview/start')) {",
          "    pm.test('ä¿å­˜ä¼šè¯ID', function () {",
          "        const jsonData = pm.response.json();",
          "        if (jsonData.success && jsonData.data && jsonData.data.session_id) {",
          "            pm.collectionVariables.set('sessionId', jsonData.data.session_id);",
          "            console.log('å·²ä¿å­˜ä¼šè¯ID:', jsonData.data.session_id);",
          "        }",
          "    });",
          "}"
        ]
      }
    }
  ]
}
